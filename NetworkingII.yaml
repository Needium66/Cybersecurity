Networking II- Routers and switches
All about my coursework.
LAN Standard Review
1) Point-to-Point- Just 2 points or nodes
2) Multi-point- 3 or more nodes or points
MESH: each node to every other node
ADVANTAGE- redundant pathways; not practical
DISADVANTAGE- expensive; redundant wire, each needs a NIC( Network Interface Card)
STAR: each device connects to a CENTRAL POINT
ADVANTAGES - each node is isolated on its own cable
Easy to connect and disconnect without disrupting other nodes
All data goes through a central point.
Easy to isolate problems 
DISADVANTAGES: Requires more cable
HUB failure will disable entire network.
There are 3 types of HUB
1) PASSIVE HUB- It is a simple signal splitter. Main function is to electrically CONNECT the arms of the HUB. All traffic is routed to all nodes.
2) ACTIVE HUB- Does same as PASSIVE HUB, but it REGENERATES and RETRANSMITS the message
3) INTELLIGENT HUB- Similar to ACTIVE and PASSIVE HUBS. But it does more intelligently- it makes more INFORMED PATH SELECTION; it is only
sent to the NODE that needs the MESSAGE.
RING: each node in the ring RECEIVES a message and RETRANSMIT it to the next. This means each node acts as a REPEATER.
ADVANTAGE- NO signal degradation
DISADVANTAGE- A break in the ring may disrupt the network
Each node must be involved in almost each message transmission.
e.g a TOKEN RING
BUS: each node is ATTACHED to the same TRANSMISSION MEDIUM. Each node is IDENTIFIED with a UNIQUE ADDRESS.
ADVANTAGE- minimum cable cost
DISADVANTAGE- no central point, which means it is more difficult to troubleshoot.

HYBRID: combines parts of differnt topologies.
LOGICAL (VIRTUAL) TOPOLOGIES
1) LOGICAL RING- Data is passed from node to node, one at a time. Each node has a SEPARATE receiver path and transmitter path e.g TX and RX

LAN STANDARDS: Standards that are used in COMPUTERS to ease NETWORK connections between one computer and the other without regards to brands.
802.2 - Defines Logical Link Control (LLC)- This is close to what is called the Data Link Layer (Layer 2 in OSI Layer Model). Consist of LLC layer and MAC (Medium Access Control) layer
There are 2 types of LLC- Connectionless services e.g UDP is connectionless protocol UDP/IP e.g postal service. Connection-oriented services e.g TCP/IP e.g telephone
802.3 - Defines Ethernet (CSMA/CD)- Alternatively called CSMA/CD . It is said to be operating in Multiple Access (MA) mode. All data that is

transmitted by the SENDING COMPUTER is encapsulated or formed into a FRAME addressed to the DESTINATION COMPUTER. The FRAME is broadcast
over the common cable. All computer's connected to this cable DETECT that a FRAME is being transmitted. Only computer that MATCHES the destination
address continues receiving the FRAME and responds according to PREDEFINED LINK PROTOCOL. 
802.4 - Defines Token Bus
802.5 - Defines Token Ring

Difference between Broadband and Base or Baseband- Baseband; the wire can only handle one message at a time(channel at a time) while Broadband; the wire can handle multiple messages at a time.
The Network Interface Card(NIC) CONNECTS the COMPUTER(DTE) to the Ethernet Line using 5 wires

100% of LAN is Ethernet today i.e CSMA/CD. It is more popualr than Token Ring now. Token Ring was more popular in the 1970's about 80% of LAN
and Ethernet was 20%.

ROUTERS AND SWITCHES shaped MODERN NETWORKING
Router has 3 interfaces
Serial 1 interface - S1
Serial 0 interface - S0
Ethernet Interface- E0
The serial interfaces (S1 and S2) are used to CONNECT OTHER routers.
Ethernet interface is used to CONNECT computers to FORM the LAN.
E.G Having 3 routers connecting routers together to form WAN- the phase between routers. So between these 3 routers wil be 2 WANs WAN 1 
and WAN 2. 3 routers- Router A, B and C. Ethernet will form 3 LANs then LAN 1, 2 and 3
Comparing Ethernet with Token Ring: Traffic against Throughput.
Ethernet PERFORMS better in LOW TRAFFIC. As traffic increases, the number of collisions increase, and so the THROUGHPUT from ETHERNET
decreases in HIGH TRAFFIC. But Token ring PERFORMS better at High traffic.
SEGMENTATION and COLLISION DOMAINS indicate why ETHERNET is the most DOMINANT LAN today.
SEGMENTATION means we can add ROUTERS to ease or streamline the COLLISIONS occurring. Add 3 more routers. It was 100 routers before.
Divide into 3 segments- 34 routers on Router A, 34 on Router B, 33 on Router C.
SWITCH IMPORTANCE TO ETHERNET DOMINANCE:
Switch operates at OSI layer 2 i,e it uses the MAC address. Router uses the IP address. Switch has multiple ports. Using HUB in switches
enables it to have more COLLISION DOMAIN added and therefore makes ETHERNET performs better than TOKEN RING.

WEEK 2: SUBNETTING
IP ADDRESS

SUBNET MASK
IP ADDRESS- You have got 2 routers. Each router has ethernet that has multiple computers communicating. The computers that have ethernet in
each of the routers can communicate with each other through their MAC addresses. But what of if a computer in Router 1 wants to communicate with
the computer in Router 2? This is done through the power of an IP. IP in comupter A that has ethernet that forms LAN with IP in computer C
that has ethernet that forms LAN too. So eventually, we will have 2 addresses- MAC address and IP address (2 MOST IMPORTANT ADDRESSES IN MODERN COMPUTING)
IP address has 32 bits 2 raised to power 32. MAC address has 48 bits. MAC address CANNOT be used for a large network.
SUBNET MASK- It SEPARATES the network card of the IP address from the host address of the actual computer i.e it masks it. it secures it from
being revealed.

CLASSFUL IP ADDRESS- CLASS A, B and C
Class A: The first octet address is the NETWORK, the 3 Octet address identified as the HOST i.e N, H, H, H i.e network.node.node.node
Class A Addresses: network.node.node.node 0.0.0.0 through 127.255.255.255.
In class A network, the most significant bit(msb) in the IP ADDRESS is 0 (zero) 0NNNNNNN nnnnnnnn nnnnnnnn nnnnnnnn
where N = Network address bit, n = host address bit
So Class A Network can be IDENTIFIED BY an IP Address in which msb = 0. Therefore the first octect in a Class A IP address is between 0 and 127
( i.e whenever you see an IP address that has a number from either 0 to 127 in its first octet, it is Class A)
0000 0000(binary) = 0
0111 1111(binary) = 127
NOTE: A network of all 0's is a DEFAULT ROUTE(RESERVED IP ADDRESSES)
Network of 127 is used for DIAGNOSTICS. Therefore, only 126 CLass A network addresses exist(between 1 and 126)
For the Node Address: 24 bits are used, so there are, so there are 2 raised to 24 or 16,777, 216 unique values. But because node addresses
of all 0's and 1's are RESERVED, there are actually 2 raised to 24 - 2 or 16,777,214 unique values.
So 10.0.0.0 is a NETWORK ADDRESS, 10.0.0.1 is the FIRST NODE ADDRESS within the NETWORK. The NODE ADDRESS can range from 10.0.0.1 to
10.255.255.254 since 10.255.255.255 is RESERVED.10.255.255.255 is used to BROADCAST TO ALL NODES on CLASS A NETWORK ADDRESS(10.0.0.0)
There are 2 THINGS that determine which part of the IP address is the NETWORK ADDRESS and the NODE ADDRESS-
Class B: The first 2 OCTETS identified as NETWORK, the last 2 OCTETS identified as HOST i.e N.N.H.H - network.network.host.host
128.0.0.0 through 191.255.255.255
In CLASS B network the msb=1 and the 2nd msb=0. 10NNNNNN NNNNNNNN nnnnnnnn nnnnnnnn
where N= network address bit, n = host address bit. The first 2 OCTETS determine the network address, but since Class B network needs to begin
with 10, you have 14bits or 2 raised to the power of 14 = 16,384 unique Class B network addresses. So the range of IP addresses in Class B
network is between 128 and 191 inclusive
1000 0000 0000 0000 = 128.0.0.0
1011 1111.1111 1111 = 191.255.255.255
Class C: The first 3 OCTETS identified as the NETWORK and the last identified as the HOST. NNNH- network.network.network.host
192.0.0.0 through 223 255 255 255
In CLASS C network the first 3 msb = 110. This allows for 21 bits or 2 raised to 21 =2,097,152. So the range of possible IP addresses are
between 192.0.0.0 through 223.255.255.255 inclusive
1100 0000. 0000 0000. 0000 0000. 0000 0000 = 192.0.0.0
1101 1111. 1111 1111. 1111 1111. 1111 1111 = 223.255.255.255
Each class C network may have  2 raised to 8 - 2 0r 254 possible node addresses. For example
192.234.123.0 represents the NETWORK ADDRESS
192.234.123.255 represents the BROADCAST ADDRESS
192.234.123.001 is the first NODE ADDRESS on the NETWORK
192.234.123.254 is the LAST NODE on the NETWORK
SUBNET MASK: Default
CLASS A - 255.0.0.0
CLASS B - 255.255.0.0
CLASS C - 255.255.255.0
Suppose we have a Class C IP address with 207.207.7.0, the default subnet mask will be 255.255.255.0
SUBNETTING (Independent Network): Sub divide POSSIBLE ADDRESSES e.g 254 into a smaller number
RESERVED IP ADDRESSES(SPECIAL PURPOSE):
1) Network address of all 0's - This network(default route)
2) Network address of all 1's - All networks (broadcast address)
3) Network address of 127  - For diagnostic tests
4) Network address of 127.0.0.1 - (Feedback loop)For loop back tests in which node sends a test packet to itself without generating network traffic
5) Node address of all 0's - Because a node address of all 0's cannot refer to 1 single node, a node address of 0's refers to the network address
6) Node address of all 1's - "all nodes" on this network. This is used as a broadcast address . Class B 190.5.255.255 refers to all nodes on
on this 190.5 Class B address
7) 0.0.0.0 Used to designate the default route
8) 255.255.255.255 is the Broadcast to all nodes of the network
NOTE(RULE):
CANNOT USE ALL 0'S
CANNOT USE ALL 1'S
The two things that DETERMINE which part of the IP address is the network address and node are:
1)The class of thr IP Network: Class A or B or C
2)The subnet mask
Classful (Classical) Subnetting- e.g you have a Class C network address of 192.234.123.0. You did not have 254 nodes on this network. Only
20 nodes. Instead of MONOPOLIZING the entire network address for only 20 nodes. It will be better to SUBNET(Subnetwork(Subdivide a network address into
smaller independent networks) and a SUBNET MASK is used to DISTINGUISH where one network ENDS and another one BEGINS. It is a SUBNET MASK
that tells us WHICH BITS are used for the NETWORK ADDRESS and which are used for the NODE ADDRESS.
CLASSLESS IP ADDRESS
IP CLASSES: 5 classes of IP network
             8       8        8    8
CLASS A   Network  Host      Host Host - It has a large number of HOSTS. So 24 of the 32bits are used to ADDRESS the HOSTS. 24 for hosts
CLASS B   Network Network    Host Host - Has a MODERATE number of HOSTS. 16 (half) of 32bits are to ADDRESS the HOSTS
CLASS C   Network Network Network Host - Has FEW NUMBER of HOSTS. 8 of 32 bits are to ADDRESS the HOSTS.
CLASS D   Multicast
CLASS E   Research
The breakdown is up in 8s. First octet, second one, third one and the fourth one.

SUBNETTING CALCULATIONS:
IP address is 192.10.20.0 and subnet mask is 255.255.255.192
1) How many valid IP subnets do we have?
2)How many possible HOSTS in each subnet?
c) What are the NETWORK ADDRESS, the IP ADDRESS of the FIRST HOST, SECOND HOST, LAST HOST and BROADCAST ADDRESS of the Subnets?

ANSWER
This is a Class C IP address since it starts with 192 and in Class C, you have the first 3 OCTETS as the NETWORK ADDRESS. Therefore, the
LAST OCTET is the only HOST(NODE) address. N.N.N.n
This means it is ONLY THE LAST OCTET that can be used for SUBNETTING.


192.10.20.0         255.255.255.192
                    11111111.11111111.11111111.11000000 (Binary representation)
                    To do the subnetting, PARTITION OFF the 1s, which is the ADDRESS, and the 0s, which are the NODES, partition after 
                    the 1s i.e 11---000000
                    Now we have 2bits for subnetting. The possibilities from there is 00. Going back to RULES- CANNOT USE ALL 0's and
                    CANNOT USE ALL 1's. Therefore, it is not a VALID SUBNET.
                    Therefore our first SUBNET will be 01. Therefore the ADDRESS of our first subnet will be 192.10.20, what is the last OCTET
                    Using 000000 it will be 1,2,4,8,16,32,64 Therefore it will be 64. Counting from the 0 at the back, backward, then do the subsequent ones. 192.10.20.64
                    01--000000 =   0=1,0=2,0=4,0=8,0=16,0=32,1=64. It stops at 1 from backward
                    Therefore my first subnet is 192.10.20.64
                    What will be the address of out second subnet? it will 10 from 10---000000
                    It will be 0=1,0=2,0=4,0=8,0=16,0=32,0=64,1=128
                    Therefore my second subnet = 192.10.20.128
                    What about 11? CANNOT GET ALL 1'S (RULE)
                    So, if there is 2 bits for subnetting, 2 raised to power of 2 is 4. CANNOT USE ALL 0'S and 1's.
                    Therefore subtract 2 from 4, it gives 2 subnets. 2 SUBNETS.
NOTES: 2 bits of the LAST OCTET(node octet) will be used for SUBNETTING and remaining 6 bits will be used to DEFINE THE HOSTS.
With 2 bits for SUBNETTING, how many subnets can you have
00 NOT ALLOWED ACCORDING TO RULES
01 VALID SUBNET
10 VALID SUBNET
11 NOT ALLOWED ACCORDING TO RULES
Therefore there are only 2 valid subnets 01000000=64 and 10000000=128
The minimum number of bits that you can use is 2bits.

What is the first IP ADDRESS in the first SUBNET(192.10.20.64)? The first one is 192.10.20.65 (0100000000)
What is the second IP ADDRESS in it? 192.10.20.66 (010000010)
What will be the last IP ADDRESS? CANNOT HAVE ALL 1's) 192.10.20.126 (0111111110)
ALL 1's is called BROADCAST ADDRESS 01---11111111. Broadcast address in this case is 192.10.20.127

The first IP ADDRESS of the second subnet(192.10.20.128) is 192.10.20.129
The second IP ADDRESS is 192.10.20.130
The third IP ADDRESS is 192.10.20.131
The last IP ADDRESS is 192.10.20.190

NOTES:
Subnet 64    HOST
01           000000  (Network address)
01           000001  (Refers to the first host in the subnet)
01           000010  (Refers to the second host in the subnet)
01           000011  (Refers to the third host in the subnet)
01           111110  (Refers to the last host address in the subnet)
01           11111111 (Refers to the broadcast address)


Subnet 128    HOST
10           000000  (Network address)
10           000001  (Refers to the first host in the subnet)
10           000010  (Refers to the second host in the subnet)
10           000011  (Refers to the third host in the subnet)
10           111110  (Refers to the last host address in the subnet)
10           11111111 (Refers to the broadcast address)



ROUTER CONFIGURATION- Using Cisco 2500 Series Router
It is using an IOS OS
It is a prompt based system
Its IOS can be divided into 4 COMMAND MODES (Each designated by a different prompt)
1) User EXEC Mode   Router>
2) Privileged EXEC Mode Router#
3) Global Configuration Mode Router(config)#
4) Specific Configuration Modes
      Interface     Router(config-if)#
      SubInterface  Router(config-subif)#
      Controller    Router(Config-controller)#
      Map-list      Router(config-maplist)#
      Map-class     Router(config-map-class)#
      Line          Router(config-line)#
      Router        Router(config-router)#
Most of the router configuration command are issued in Global or Spefic Configuration Mode (#)
To move from PRIVILEGED EXEC Mode to CONFIGURATION MODE the (config terminal or config t is issued)
Router#config t
Router(config)#
1) When you (a user) first log in to a router, the USER MODE prompt is displayed:
Password
Router A>
enable command: can be used to access Privileged Mode from User Mode (you get this prompt when in Privileged Mode #)
disable command: can be used to EXIT from Privileged Mode
Exit: can be used to Exit from User Mode

2) Naming a host router
Given a name to a host router that is logged into

Router>enable    (accessing privileged mode from user mode)
Router#config t  (accessing configuration mode)
Router(config)#  hostname LAB-JIDE (Given it a hostname)
LAB-JIDE(config)#   (host name has been given and you are accessing it)

3) Set passwords
There is a PASSWORD for User Mode and ENCRYPTED PASSWORD for Privileged EXEC Mode.
The User must be in Global Configuration Mode to set the PASSWORDS.
You can set the USER MODE password with enable password command
You can set the PRIVILEGED EXEC password with enable secret command

Router>enable
Router#config t
Router(config)#
LAB-JIDE(config)# enable password yourpassword
LAB-JIDE(config)# enable secret  thesecretpassword

Configuraing Routers:
A router has basically 3 interfaces-
Serial 1 interface S1
Serial 0 interface S0
E0 interface (Ethernet) LAN
The routers are connected to each other by CONNECTING the serial interfaces (S1 and S0)
Each one of the interfaces EXIST in a subnet
The interfaces will be given an IP address
NOTE: Routers are of different models and therefore have different naming for the interfaces e.g E0 may be called GigabitEthernet0/0 or
Ethernet0/0. The S0 may be Serial0/3 or S1 may be Serial0/3/1.
Therefore, look at the TOP OF THE ROUTER for proper naming.

DTE/DCE
In communications, they are often misunderstood maybe because of their historical origin in telecommunications.
The way telecommunication was connecting before was having the TTY (data terminal) called teletype CONNECTED to distant TTYs using the
TELEPHONE SYSTEM. The Teletype TTY( called a DTE) would be connected to a MODE (Called DCE), which was in turn CONNECTED to a telephone line.
When information was entered into the local TTY(DTE), the same information would be transmitted and would appear through distant TTY(DTE)
TTY which were the DATA SOURCE, were later replaced by computers.
DCE(MODEM): It originally meant Data Circuit Terminating Equipment. But also known today as Data Communications Equipment. It provides a
PHYSICAL CONNECTION to the NETWORK and provides SIGNAL for DATA TRANSMISSION. Examples are MODEM and Network Interface Card (NIC)
DTE(TTY): Data Terminal Equipment. It is a DEVICE at the user end that SERVES as a data source.
It is also a device at the DESTINATION that receives the data being sent.
The DTE connects to a NETWORK through the DCE.
Originally, the data terminal or teletype was the most common DTE. But now, the most common DTE is COMPUTER ROUTER, MULTIPLEXOR.

COMMUNICATIONS:
DCE and CTE are used these days to describe how ROUTERS communicate with each other. When 2 routers are connected to each other through
the SERIAL INTERFACES(WAN- which exists between the 2 routers). One of the serial routers MUST provide a CLOCK SIGNAL in order to send in
the data. With serial synchronous transmission of data, there are 2 lines. One for the DATA and one for the CLOCKING SIGNAL, which tells the
RECEIVING END and when to sample the data line.

Data 0  1   0   0   1   1   0
Carrier Signal Clocking Signal 0  1   0   0   1   1   0
DCE will be plugged into the serial interface that is providing THE CLOCK. DTE is plugged into the serial interface that is RECEIVING the
CLOCK. For older cables- the cable with PRONGS on it is the DTE

How To Configure The Serial Interfaces:

The clock will be generated from the S0 interface. To TURN OFF the interface, use the "shutdown" command instead.
LAB-JIDE# config t  (get into config terminal)
LAB-JIDE(config)# interface s0  (the DCE)
LAB-JIDE(config-if)# ip address 207.207.7.129   255.255.255.240 (assign an ip address)
LAB-JIDE(config-if)# clock rate 56000  (Give it a clock rate)
LAB-JIDE(config-if)# no shutdown   (to startup the interface)
LAB-JIDE(config-if)# exit
LAB-JIDE(config)#

To configure S1: below (It will RECEIVE the CLOCK SIGNAL and not GENERATE IT)

LAB-JIDE(config)# interface s1  (the DTE)
LAB-JIDE(config-if)# ip address 207.207.7.128   255.255.255.240 (assign an ip address and subnet mask address)
LAB-JIDE(config-if)# no shutdown   (to startup the interface)
LAB-JIDE(config-if)# exit
LAB-JIDE(config)#

Configure the Ethernet Interface E0. On 2500, It is simply E0. On 1700 router, it is f0.0(FastEthernet)

1700 Router
LAB-JIDE(config)# interface f0.0
LAB-JIDE(config-if)# ip address 207.207.7.113   255.255.255.240
LAB-JIDE(config-if)# no shutdown
LAB-JIDE(config-if)# exit
LAB-JIDE(config)#

2500 Router
LAB-JIDE(config)# interface e0
LAB-JIDE(config-if)# ip address 207.207.7.113   255.255.255.240
LAB-JIDE(config-if)# no shutdown
LAB-JIDE(config-if)# exit
LAB-JIDE(config)#

Configuring the routing protocol:
This command will tell the router what routing protocol to use. The following NETWORK commands will identify the subnets associated with
each router interface

LAB-JIDE(config)# router rip ( routing protocol rip)
#associating each interface with a particular subnet. Here we have subnet 96, 112 and 128 for each routing subnet interface.
LAB-JIDE(config-router)# network 207.207.7.96
LAB-JIDE(config-router)# network 207.207.7.112
LAB-JIDE(config-router)# network 207.207.7.128
LAB-JIDE(config-router)#exit
LAB-JIDE(config)#

Configuration to assign HOSTNAME to each ip address:
After the assignment, the hostname can be used instead of IP address when trying to Telnet or ping the ip address.
LAB-JIDE(config)# ip host LAB-A 207.207.7.49  207.207.7.65  207.207.7.34
LAB-JIDE(config)# ip host LAB-B 207.207.7.81  207.207.7.66  207.207.7.97
LAB-JIDE(config)# ip host LAB-C 207.207.7.113  207.207.7.98  207.207.7.129
LAB-JIDE(config)# ip host LAB-D 207.207.7.130  207.207.7.145
LAB-JIDE(config)# ip host LAB-E 207.207.7.146
LAB-JIDE(config)# ip host LAB-F 207.207.7.17  207.207.7.33

Configuring the cosnole:
Connection from the console connection of the router to the personal computer using the DB9 connection.
The login command specifies that the user wants the ability to login using a password
LAB-JIDE(config-line)#line console 0
LAB-JIDE(config-line)#login
LAB-JIDE(config-line)#password cisco
LAB-JIDE(config-line)#exit

To disable a password:
LAB-JIDE(config-line)#line console 0
LAB-JIDE(config-line)#login
LAB-JIDE(config-line)#no password
LAB-JIDE(config-line)#exit

To create a login and password on vty virtual terminal:
LAB-JIDE(config-line)#line vty 0 4
LAB-JIDE(config-line)#login
LAB-JIDE(config-line)#password mypassword
LAB-JIDE(config-line)#exit

Different Types of Memory in a 1700 or 2500 Cisco Router
Flash Memory: EEPROM contains IOS, the CISCO Operating System. To verify your version of IOS, use this command Router#sh flash
NVRAM: Non-volatile Random Access Mmeory contains the start up configuration of the router
NVRAM is the start-config.
command: copy run start (will copy the runnning configuration to the startup configuration)

NOTE: To erase a configuration and start over
LAB-JIDE#erase start
LAB-JIDE#reload

PASSWORD RECOVERY FOR THE ROUTER 1700 ROUTER:
Power off and on: As the 1700 comes up, hit Ctrl+Break
Commands:
1> confreg 0X2142    ; to change the internal register to allow you to bypass the password
2> reset
    When the 1700 comes up:
Router> ena
Router#config t
Router(config)#config-register 0x2102  ; to change the register back to normal
Then set the new password

PASSWORD RECOVERY FOR THE ROUTER 2500 ROUTER:
1) Reboot
2) Within 60 seconds press control + break
3) > o/ r 0x2142
4) > i(goes to setup)
5) > n (at any other prompts)
6) enable
7) # copy start run
8) config t
9) (config)# config reg 0x2102
10) (config)# enable secret <password>

Use notpad to create a textfile for your configurations: exercise

#Configuration for router A
config t
hostname LAB-A
enable password cisco
enable secret class

interface f0.0
  ip address 207.207.7.23 255.255.255.240
  no shutdown

interface s0
  ip address 207.207.7.33 255.255.255.240
  clockrate 56000
  no shutdown

interface s1
  ip address 207.207.7.81 255.255.255.240
  no shutdown
exit

router rip
  network 207.207.7.16
  network 207.207.7.32
  network 207.207.7.80
exit


ip host LAB-A 207.207.7.17 207.207.7.33 207.207.7.81
ip host LAB-A 207.207.7.34 207.207.7.65 207.207.7.49

line console 0
  password cisco
  login

line vty 0 4
  password cisco
  login
  exit
exit
copy run start


#Configuration for router B
config t
hostname LAB-B
enable password cisco
enable secret class

interface f0.0
  ip address 207.207.7.23 255.255.255.240
  no shutdown

interface s0
  ip address 207.207.7.33 255.255.255.240
  clockrate 56000
  no shutdown

interface s1
  ip address 207.207.7.81 255.255.255.240
  no shutdown
exit

router rip
  network 207.207.7.16
  network 207.207.7.32
  network 207.207.7.80
exit


ip host LAB-B 207.207.7.17 207.207.7.33 207.207.7.81
ip host LAB-A 207.207.7.34 207.207.7.65 207.207.7.49

line console 0
  password cisco
  login

line vty 0 4
  password cisco
  login
  exit
exit
copy run start

CABLES:
Focus on RJ-45 Cabels:
Crossover
Straight Through

DB-25 Ports
Pin 1- Ground
Pin 2- Transmit
Pin 3- Receive

An example of crossover cable is the ethernet cable.
2 computers can be connected together with Straight Through cables by using  a HUB.


WEEK 5 ROUTING PROTOCOLS
Routing Protocols: Routing protocols are protocols that enable the routers to do its job of ROUTING, BUILDING ROUTING TABLES, EXCHANGING ROUTING TABLES etc
Examples are RIP, IGRP, OSPF
Routed Protocols: Are protocols that enable a MESSAGE to move through the system (that help to implement the OSI Layer 3 Network layer)
Used to direct user's traffic. used in network layer address to enable a packet to be forwarded from one host to another host based on the
IP addressing scheme e.g IP, IPX, APPLETALK are examples of routed protocols.

Routing tables can be created STATICALLY or DYNAMICALLY.
Static Routing: Network admin will build the ROUTING TABLE by manually entering the IP addresses.
Dynamic Routing: It involves ROUTING PROTOCOL that sends SPECIAL PACKETS of information back and forth between routers. i.e when a router
RECEIVES a packet, it looks up the DESTINATION IP address in the ROUTING TABLE. If the destination IP address is not in the router's ROUTING
TABLE, it will discard the packet unless provisions have been made to send packets with unknown IP address to default IP address (on a default
router)
Dynamic routing is accomplished by 2 types of routing protocols
1) Distance vector
2) Link state
Distance vector protocol: are LESS COMPLEX than link state protocols e.g DVP might DETERMINE the "best path" based on the number of hops( no
of routers encountered in a network path). Each time a packet goes through a ROUTER, it is another "hop". The ROUTE with the LEAST NUMBER OF
HOPS is the best route for DVP. DVP uses BELLMAN FORD ALGORITHM to forward routing table information. It passes entire routing table to its
neighbors.
Two important DVPs are:
RIP- Routing Information Protocol
IGRP- Interior Gateway Routing Protocol
Link State Protocols: Are more COMPLEX. they DETERMINE the entire TOPOLOGY of internetwork. An example of LSP is OSPF (Open Shortest Path First)
They use DIJKSTRA'S ALGORITHM to gain a picture of the entrire TOPOLOGY of a network. Autonomous System occurs in - when routers are in the SAME network under a common
administrative domain, then it is called a INTERIOR GATEWAY PROTOCOL (IGP). If a routing protocol exchanges router information between 2 SEPERATE
ASs, it is called Exterior Gateway Protocol (EGP).
Note: More than one route with equal hops will become LOAD SHARING.
When routing tables are inconsistent, ROUTING LOOPS occur.
You can prevent ROUTING LOOPS by using the below techniques
Maximum Hop Counts: To avoid hop count getting to infinity, you may DEFINE a MAXIMUM HOP COUNT. RIP has a default maximum hop count of 15.
After a LOOP of 15 hops, the DESTINATION NETWORK will be considered down and therefore unreachable
Split Horizon: A distance vector rule that says that PACKET CANNOT BE SENT BACK IN THE SAME DIRECTION FROM WHICH THEY CAME FROM.
Route Poisoning: If a router DETECTS that a network is DOWN, it enters a 16 for the HOP COUNTS in the routing table for the network. So
other routers will see an unreachable hop count and not attempt to send that packet in that direction.
Hold down timers: An enforced time delay to prevent updates in a rapidly changing network  from changing the route table too quickly.
It gives new ACCURATE ROUTING TABLES time to circulate.
Disadvantages of DVP:
1) Scalability- RIP cannot scale up to a LARGER NETWORK due to  too many periodic updates. Therefore DVP should only be used on samller networks.
2) Convergence- RIP and IGRP are SLOW to announce updates to other routers because of the fact that the router SENDS its ENTIRE ROUTING
TABLE with the changed link.
3) Loops- It occurs when routing tables contains INCONSISTENT DATA. A non-convergence router could continuously loop packets around the
network despite the fact that the destination node may be down.

An example of a routing table

Router A s0(172.100.10.0)---------------s1 Router B so(172.100.20.0)---------------- s1 Router C
  e0                                       e0                                           e0
   | 172.100.30.0                           | 172.100.40.0                               | 172.100.50.0


Initial State: Each routing table shows only directly connected networks. Tables show the address, exit 
interface, and hop count.
 Routing Table A Routing Table B Routing Table C
 172.100.30.0(a subnet) e0( routing interface) 0( no of hops) 172.100.40.0 e0 0 172.100.50.0 e0 0 .
 172.100.10.0 s0 0 172.100.10.0 s1 0 172.100.20.0 s1 0
 172.100.20.0 s0 0
 Summary First Line: Table A, out of the s zero subnet, we have the subnet (172.100.10.0). We are directed to e zero subnet (172.100.30.0) and
 we have 0 hop count. The explanation holds for the rest too.
 If the above table converged, they will look like the below converged state.
Converged State: Tables have been passed throughout the network and all tables show convergence.
 Routing Table A Routing Table B Routing Table C
 172.100.10.0 s0 0 172.100.10.0 s1 0 172.100.10.0 s1 1
 172.100.20.0 s0 1 172.100.20.0 s0 0 172.100.20.0 s1 0
 172.100.30.0 e0 0 172.100.30.0 s1 1 172.100.30.0 s1 2
 172.100.40.0 s0 1 172.100.40.0 e0 0 172.100.40.0 s1 1
 172.100.50.0 s0 2 172.100.50.0 s0 1 172.100.50.0 e0 0

MORE ON RIP:
It is originally developed by Xerox Corp. It works in small environments. It has serious limitations when used in larger internetworks.
It is slow to convergence i.e it takes a longer time for router changes to be known to all routers. It sends the complete routing table evry
30 seconds. Two prominent versions of RIP are Cisco RIP (uses only hop counts) and Novell RIP (uses hops and ticks-measurement of time)
RIP has 3 timers:
Route invalid timer: It is the length of time that determines if a route has become INOPERABLE. If RIP does not get any updates from a 
particular timer within this period of time, it will assume there is a PROBLEM, and sends updates to its neighbors telling them this router
is invalid. The route invalid timer is usually 90 seconds.
Route flush timer: Times the interval between a route becoming invalid and its removal from the routing table. It is usually set for 240 seconds
Administrative distances (AD): Used to measure the TRUSTWORTHINESS of routing information passed from a neighbor router.

Difference between version1 and version 2: ( From CIDR and VLSM)
RIP version 1 does not SUPPORT CIDR or VLSM(Variable Length Subnet Mask)- Because of this, subnet mask cannot be changed once established.
Modern RIP SUPPORT CIDR and VLSM
RIP version 2 support VLSM and Discontinuous network(2 subnets of a classful network seperated by a different network)
Discontinuous network does not work with RIPv1 and IGRP.

IGRP: Cisco propriatary routing protocol. Only used by Cisco routers. It was created to overcome some of the limitations with RIP. T conevreges
faster than RIP. It does not have RIP up count limitaions. There is an Enhanced IGRP (EIGRP)= It is an hybrid protocol. IGRP uses different metrics
like BANDWIDTH, DELAY OF THE LINE, LOAD, RELIBAILITY, MAXIMUM TRANSMISSION UNIT (MTU) for determining the best route. The MTU is measured in bytes.
MTU is the largest packet size that an interface can handle. The default metrics are bandwidth and delay of line (called COMPOSITE METRIC). The
other 3 metrics are not default metrics.
It has 4 timers:
Update timer= to determine the frequency of table updates
Invalid timer- determine the length of time before a route is considered invalid or inoeprable
Hold down timers- the default is 3 times the update timer plus 10.
Flush timer- determines the time period that the route is flushed from the router table after detecting that the route is no longer valid.

Link state protocols:
The most important link state protocol is OSPF (Open Shortest Path First)
Its basic concept is that it tries to present a COMPLETE VIEW of the topology of the network unlike Distance Vector protocol that present
a flat view. It has special packets that travel through the network to learn and to build the topology of the network. i.e there is a method
to verify what the network looks like. It is bidirectional (not unidirectional like RIP). Relies on Dijkstra algorithm to give the best path.
Advantages of Link State Protocols:
1) Routers have a complete view of the network
2) Bi-directional communication
3) Enhanced metrics e.g cost for superior path selection.
4) It can be triggered by topology changes that result in faster convergence.

Disadvantages of LSP:
1) Complex configurations
2) Prone to flooding (obstruction) due to much overhead (LSP, HELLO, Updates etc)
3) Processor intensive
4) Convergence is slow

OSPF:
It was developed by internet- Internet Engineering Task Force (IETF) as a replacement for RIP. It support heirachical routing protocol within
an autonomous system.  The autonomous system can be divided into routing areas. A typical routing area is a collection of one or more
subnets that are closely related. It provides FAST REROUTINGand supports variable length subner masks. If you have routers from a larger network
 from different manufacturers, the only option is OSPF
 Features of OSPF
 1) It supports CIDR and VLSM
 2) It converges quickly but as qucik as EIGRP
 3) No hop count limit
 3) The topology is hierarchical in nature.
 5) Dijkstra to calculate the route.
 6) Route propagation is based on multicast and triggered by a change in topology.

 OSPF Area: It is a group of connected routers. It enables it to establish a heirarchical area of topology. There must always be area 0.
 Neighbors: Two or more routers have interfaces directly connected.
 Adjacency: The relationship between two OSPF routers that allow them to share route updates. OSPF only shares updates with neighbors that
 have established adjacency.
 Neighborship database: Contains all list of OSPF routers for which Hello packets have been received.
 Toplogy database: Contains all info from all the Link State Advertisements (LSA) packets that have been received for a particular area.
 Link State Advertisement: This is the packet type used by OSPF to share route updates.

 IS-IS (Intermediate Systems to Intermediate Systems): It is the second Link State Protocol.

 HYBRID PROTOCOLS: Uses aspects of distance vector protocol and link state protocol. It is such a hybrid protocol. It is an enhanced version
 of IGRP. It synchronizes routing tables between neighbors and sends specific updates only when topology changes. It is a combination of
 4 metrics- Bandwidth, Delay, Load, Reliability.
 Features of EIGRP:
 Neighbor discovery- in order for 2 routers to be neighbors, they must share the same autonomous sysytem (AS) and they must have identical K
 value metrics and they must continue to recieve HELLO or ACK messages from its neighbors.
 Which protocol is the quiet protocol? EIGRP
 EIGRP uses Diffusing Update Algorithm (DUAL): to finding and maintaining best route path.
 EIGRP supports multiple autonomous systems
 EIGRP supports VLSM

 #Using Cisco packet tracer
 https://www.netcad.com/courses/packet-tracer
 using it to simulate the configurations of routers and switches.
 Create a network of 2 routers from the bottom left corner.
 Click on the left router to configure the ethernet interfaces.
 Click on the right router to configure the etherner interfaces too
 Connect the 2 routers by going to the bottom left and select serie DCE and plug it to the left router (serie 0) and connect it to the right router (serie 1 or router 1)
 Add two hubs left and right and connect them from router 0 to the hub on the left
 Add the PCs to the hubs
 Configure the routers next
 Configure ethernet next
 Configure the PCs


 #Using packet tracer, configure router network
 Install the netapad using the link given
 #Start
 Select router icon from the bottom left part of the main page
 Select "Generic" 2901 and drag it to the middle of the page ( This is your router 0)
 Select "Generic" 2901 again and drag it up to the middle of the page on the right hand side of router 0 (This is router 1)
 Select the "Connection" icon from the bottom left part of the main page
 Select "Serial DCE" connection type and drag it up to the Router 0 and join it with Router 1
 Left click on Router 0 and select click on the "Physical" tab on the page that pops up
 Select "HWIC-2T" from the navigation pane on the left and drag it to the required panel in the middle
 #Note: If you get a pop up error, switch off the power on the panel and repeat the immediate above step
 Repeat the above step for Router 1 too
 Check the "Config" tab to validate the Ethernet and Serial numbers for Router 0 and 1
 Go back to the main page and select "Hub" from the bottom left side of the page
 Drag the "Generic" hub up under the Router 0
 Drag the "Generic" hub up under the Router 1
 Select the connection type and drag it up to Router 0 to connect with Hub 0
 Select the connection type and drag it up to Router 1 to connect with Hub 1
 Select "End Devices" from the bottom left part of the page and drag it up under the Hub 0 as PC0
 Repeat the step above for PC1 beside PC0 under Hub 0
 Repeat the step above for PC2 under Hub 1
 Repeat the step above for PC3 beside PC1 under Hub 1
 Connect the PCs with hubs using the connection types. ( 4 different connection types)
 #Configure the IPs
 Left click on Router 0
 Select "CLI" tab and click on Enter
 Enter "ena" to enable the configuration
 Enter "config t"
 Enter "hostname Router0"
 #Copy and run the below command for Router0(Copy it and click on the "Paste tab at the bottom")
 ROUTER0
interface Serial0/3/0
ip address 207.207.7.33     255.255.255.240
clock rate 56000
no shutdown

Enter "exit" once configured
# Run the below command next and exit
interface GigabitEthernet0/0
ip address 207.207.7.17 255.255.255.240
no shutdown
#exit

Left click on Router1
 Select "CLI" tab and click on Enter
 Enter "ena" to enable the configuration
 Enter "config t"
 Enter "hostname Router1"
 #Copy and run the below command for Router1(Copy it and click on the "Paste tab at the bottom")
interface Serial0/3/1
ip address 207.207.7.34     255.255.255.240
no shutdown

Enter "exit" once configured
# Run the below command next and exit
interface GigabitEthernet0/0
ip address 207.207.7.49 255.255.255.240
no shutdown
#exit

Left click on PC0
Select the "Physical" tab
Select the "IP configuration tab"
Enter 207.207.7.18 into the "IP" address space
Enter "255.255.255.240" as the "subnet mask"
Enter "207.207.7.17" as the default gateway
Note: The link local address will be automatically populated
Left click on PC1
Select the "Physical" tab
Select the "IP configuration tab"
Enter 207.207.7.19 into the "IP" address space
Enter "255.255.255.240" as the "subnet mask"
Enter "207.207.7.17" as the default gateway
Note: The link local address will be automatically populated
Left click on PC2
Select the "Physical" tab
Select the "IP configuration tab"
Enter 207.207.7.50 into the "IP" address space
Enter "255.255.255.240" as the "subnet mask"
Enter "207.207.7.49" as the default gateway
Note: The link local address will be automatically populated
Left click on PC3
Select the "Physical" tab
Select the "IP configuration tab"
Enter 207.207.7.51 into the "IP" address space
Enter "255.255.255.240" as the "subnet mask"
Enter "207.207.7.49" as the default gateway
Note: The link local address will be automatically populated
#By now, you should be seeing green dots on the connection between your routers, hubs and PC networking

Go back to router0 and left click
Select CLI tab
enable the router - run "ena"
Enter "configure t"
#Run the below commands for the router rip
router rip
 network 207.207.7.16
 network 207.207.7.32
exit
Go back to router1 and left click
Select CLI tab
enable the router - run "ena"
Enter "configure t"
#Run the below commands for the router rip
router rip
 network 207.207.7.16
 network 207.207.7.32
exit

Test the connection by pinging
Go to PC0 and ping
Select the "Deskstop" tab
Select the "command prompt" run
Enter "ping 207.207.7.18"
Enter "ping 207.207.7.17"
Enter "ping 207.207.7.19"
Enter "ping 207.207.7.34"
Enter "ping 207.207.7.51"
#Note: If anyone one of them timed out, it means there is no connection
#Repeat the immediate above steps for connection testing for PC2, but change the IPs
Enter "ping 207.207.7.50"
Enter "ping 207.207.7.49"
Enter "ping 207.207.7.51"
#Repeat the immdeiate above steps for connection testing for PC3, but change the IPs
Enter "ping 207.207.7.33"
Enter "ping 207.207.7.18"

#SWITCHES(BRIDGES)
A switch is an OSI Layer 2 device, which uses the MAC address to FORWARD FRAMES
Broadcast domain: A group of DEVICES receiving BROADCAST FRAMES that are initiated from any DEVICES in the group
All COMPUTERS connected to a SWITCH or EXISTING in the same LAN, are all members of the same BROADCAST DOMAIN
ROUTERS are the only ones that can TERMINATE broadcast domain.
Broadcast domain are seperated by LAYER 3 devices e.g router
Collision domain: A group of computers on the same ETHERNET NETWORK that can be AFFECTED by a common collision.
It is a group of computers SHARING the same 10base-2,10 base 5, 10 base-T
ROUTERS, SWITCHES and BRIDGES can TERMINATE collision domain. But HUBS and REPEATERS dont.
BROADCAST FRAMES VS MULTICAST FRAMES
Broadcast frames address all IP addresses in a subnet
Muilticast frames address all IP addresses within a group.

SWITCHES AND BRIDGES
A bridge is a DEVICE that connects segments of a similar network together.
A bridge might connect a 100BaseT network to a 10Base-T network. Bridges use the MAC hardware address and are considered OSI Layer 2.
Purpose of a bridge is to LEARN MAC addresses within a network and to forward frame to the correct destination MAC address.

A switch is a MULTIPORTED BRIDGE. Switches and bridges do forward BROADCAST FRAMES.
Each network connected to a PORT on a switch can be its own COLLISION DOMAIN.
You can use a switch to break up a network into a number of collision domains (This is called SEGMENTATION)
Switches like Bridges work on data LINK layer (OSI LAYER 2) and thus use the MAC aaddress for directing frames.
DIFFERENCES IN THE TWO
1) Bridges operates with SOFTWARE,(which makes it slower than the switch) while Switches operate with HARDWARE (ASIC), Makes it faster Application-Spe ific Integrated Circuits.
2) Bridges can have only ONE SPANNING-TREE-INSTANCE, while switches have MANY.
3) Bridges usually have a SMALL NUMBER OF PORTS, while Switches may have HUNDREDS OF PORTS.

The 3 Functions of Switch:
1) Address Learning: Build a MAC address table of MAC addresses and ports. When a switch is turned on, it has an empty MAC address table. As
a frame arrives, the switch puts the MAC address and the port number where it came from into the MAC address table.
Building a MAC address table of MAC addresses and ports.
2) Forward/Filter Decisions:
3) Loop Avoidance: The Spanning-Tree Protocol is used to stop loops. If multiple switches and multiple links are used in the network, LOOPS
can occur.
CISCO 1900 CATALYST SWITCH
STP: It is the software that allows us to avoid having loops.
Last 2 ports on a switch are designed for connections e.g A, B.
You can also use ethernet ports for connecting switches.
The purpose of STP is to SHUT DOWN any LOOP that may develop in a network.
It allows COMMUNICATION among units using BPDU (Bridge Protocol Data Units)
It places switches in a PORT in one of the 4 states:
Blocking State: Frames are not forwarded. The switch will still listen to BPDU
Listening State: Listens to BPDU to ensure that no loops occur on the network before passing frame on.
Learning State: Learns MAC address and builds a filter table but does not forward frames
Forwarding State: Sends and receive all the data on the ports.

Root bridge: It has all the designated ports
Non-root bridge: has either non-designated ports, or designated ports.
Root port: Connects a non-root bridge to a root bridge.


CRC (Cyclic Redundancy Check)
Switch mode of operations:
1) Store and forward
2) Cut-through( Real-time)
3) Fragment free

Error Detection: 2 Types
Asynchronous serial communications: The smallest unit of data is character- 8-bit byte. Sart and stop bit. One of the bits, can be a PARITY
BIT. There are 2 types of parity: Even Parity and Odd Parity. Even parity is A BITWISE EXLUSIVE OR (XOR). Even parity always have an EVEN # of 1's
Odd parity is a COMPLEMENT OF BITWISE XOR. Odd parity always have an odd # of 1's.
1 EXCLUSIVE or of 0 is 0, of 0 and 1 is 1, of 1 and 0 is 1, of 1 and 1 is 0.
Synchronous serial communications: The smallest unit of data is a FRAME or PACKET. Start of Frame (SOF) and End of Frame (EOF)
SDLC Frame has 6 columns
SOF  ADDR  CONTROL   DATA  Error CK  EOF
CRC Examples:
CRC-16
CRC-CCITT
CRC-32

CRC is based on a generator polynomial of R-bits and will detect all error busts < R bits.
A CRC generator polynomial of 32 bits will be able to DETECT an ERROR BURST of 31 bits.
If the remainders is 0's. It means there is no error.

Virtual Local Area Network
Virtual LANS
Factors that contribute to misuse or overuse of broadcast packets include:
- Poorly designed firewalls
- Inadequate segmentation
- Faulty equipment

Broadcast domains: In a switched network, it is possible to control broadcasting using VLAN. VLANs can be considered to be a SUBNET or its
own BROADCAST DOMAIN. When you CREATE a VLAN, you create a SMALLER BROADCAST DOMAIN. You assign different SWITCH PORTS to different SUBNETWORKS
to be able to create this. Thus to CONTROL a broadcast domain, VLAN can be created within a switched network.
Security Considerations: Security is another reason to want to CONTROL a broadcast domains, since all devices can see all other devices and respond.
1) Any device can INTERROGATE any other device's security e.g password.
2) Users can join a workgroup just by plugging into existing hub
3) A network analyzer could be plugged into existing hub and so all traffic on that workgroup could be seen.

NOTE: Router can be used to BREAK a broadcast domains. But it is more cost effective to use SWITCHES and VLANs.
Two strategies for designing a VLAN are: END-TO-END VLAN and Local VLAN
END-TO-END VLAN: VLANs can be configured either by FUNCTION(project or department) or by PHYSICAL LOCATION. e.g VLAN named SALES-it may be
created in which all personnels in the Sales Department are members. VLAN can communicate with each other, but not with those outside VLANs.
Another advantage is that you can have MEMBERS of that VLAN in different network locations not just within the immediate vicinity. Areas of
common interest can be grouped together in VLANs.
80/20 rule: Keep 80% of the traffic within VLAN, and only 20% outside VLAN.
switch fabric- a network of connected switches.

Local VLAN: VLANs can also be configured by physical location and not by FUNCTION, PROJECT or DEPARTMENT.
Local VLANs are easier to MANAGE in a centralized server configuration.
When 80/20 rule CANNOT be maintained, use Local VLAN instead.
When most of your traffic is outside the end-to-end VLAN, then use Local VLANs.

Two ways of assigning VLANs: Static or Dynamic.
Static: Set up by admin, who assign switch ports manually. It is the most secure.
Dynamic: Set up dynamically.  e.g a MAC address assigned to a VLAN, once the MAC address moves, the user stays in the VLAN. mMore software
is needed in order to do this. VMPS to create a mapping from MAC to VLANs.

Two types of links: Access Links and Trunk Links
Access Links: connect workstations to the Switch ports (representing a collision domain). Are associated to only 1 VLAN.
Trunk Links:  carries information from many VLANs. Can handle info from multiple VLANs.
Both are used to connect switches to each other. through what is called a switch fabric.

IDENTIFYING VLAN- FRAME TAGGING:
VLAN ID is called FRAME TAGGING.
These are methods by which VLANs can be implemented- 4 types.
Interswitch Link(ISL): It is a Cisco proprietary protocol only used by Cisco. It tags VLAN info onto the Ethernet frame.
IEEE 802.1q: This protocol should be used on non Cisco equipment. It uses an internal tagging process different from cisco.
LAN emulation (LANE): Used to communicate multiple VLANs over ATM
IEEE 802.10 (FDDI): Used to send VLAN info over FDDI

VLAN number 1 is a default VLAN- can't be used.

VTP: There must be a VTP server and all VTP must be in the same VTP domain. Catalyst 1900 can be a VTP server.
Switch in a VTP domain can operate in one of the 3 modes: server, client, transparent.
Server- is the default mode for all Cisco catalyst switches.
Client- switch in the client mode receive and send updates from the server, but cannot make any changes.
Transparent- The switch will not participate in the VTP domain.

#ACCESS CONTROL LISTS(ACLs)
It is a list of instructions and conditions that ask router to filter out or to allow certain traffic flow.
It can ALLOW or DENY packets from moving through a router. It exists for IP and IPX and work similarly.
SPX/IPX is PREDECESSOR of TCP/IP. SPX/IPX was developed to work with Novell Netware (One of the first successful platform for LAN
implemented for PCs).
#Similarities between SPX and TCP
1) They are both Layer 4 protocols
2)They are both connection oriented
#Similarities between IPX and IP
1) They are both Layer 3 protocols
2) They are both connectionless.

TCP/IP has replaced SPX/IPX. TCP/IP was developed to OPERATE over the INTERNET, while SPX/IPX cannot.
Access lists(ACLs) can be applied to INBOUND PACKET or OUTBOUND PACKETS.

#Reasons for Access-Lists
- Limit traffic and increase performance. ACLs can instruct Routers to NOT process packets that are not needed.
- Provide traffic flow control. Routing update packets can be restricted.
- Security- Certain applications like FTP, or Telnet can be inhibited or allowed. i.e first line of defence for network security.
- Limit certain traffic while permitting other traffic.
There are two types of ACLs
1) STANDARD ACLS
IP: Use only the SOURCE IP ADDRESS of an IP Packet
IPX: Can filter both the source and destination IP addresses
Place STANDARD ACL CLOSE TO THE DESTINATION INTERFACE.

Basic Format: Standard Access List
access list {1 - 99} {Permit | Deny} source address {source mask} i.e standard acl can be numbered between 1 and 99
Standard ACLs numbered 1300 - 1999 are also allowed.

2) EXTENDED ACCESS LISTS
IP: Check both SOURCE and DESTINATION IP addresses, network layer header, port number at the Transport layer.
IPX: Use source and destination IPX addresses, network layer headers, socker numbers in the Transport layer.

Basic Format: Extended Access List
access list {100 - 199} {Permit | Deny} protocol i.e 
 source address [source mask] [operator operand]
 destination address [source mask] [operator operand] [established]

 Extended ACLs numbered between 2000 - 2699 are also allowed.

 3) NAMED ACLs
 This a third type of ACLs. They have the same FUNCTIONS as STANDARD and EXTENDED ACLs, but handled a bit differently.
 # So my question is, for a question like how many types of ACLs do we have, should the answer be 3 now or 2 based only on what are considered in the lecture
 #POINTS TO REMEMBER
 1) Each interface can only have one INBOUND ACLs and 1 OUTBOUND ACLs.
 Inbound and outbound are from the perspectives of the Router Interface.
 Inbound- refers to a PACKET COMING INTO THE ROUTER VIA AN INTERFACE
 Outbound- refers to a PACKET LEAVING THE ROUTER VIA AN INTERFACE.
 2) If you remove 1 line from the ACL, you will remove the entire list. Use a text editor to build the entire list instead.
 3) Each packet is compared to the access list SEQUENTIALLY until a match is made. Once a match is made, there is no further comparisons.
 If a packet does not match up to any lines in the access list, it is discarded. An "IMPLICIT DENY"- It will DENY all traffic. i.e IF A
 PACKET DOES NOT MATCH ANY ACCESS LIST, IT WILL BE BLOCKED.
 TO overcome Implicit Deny, have a PERMIT DENY command at the end to allow traffic that has not matched the condition of the access list.
 4) Place standard access list CLOSE to the destination interface( reason-the standard access list RELIES ONLY ON DESTINATION ADDRESS). 
 Place extended access list CLOSE to the SOURCE INTERFACE(reason-it relies on the DESTINATION and SOURCE ADDRESS)
 5) Access lists are identified by the NUMBERS
 <1 - 99> IP Standard access lists
 <100 - 199> IP Extended access lists
 <200- 299> protocol type code access lists
 <300 - 399> DECnet access lists
 <400 - 499> XNS standard access lists
 <500 - 599> XNS Extended access lists
 <600 - 699> Appletalk access lists
 <700 - 799> 48-bit MAC address access lists
 <800 - 899> IPX Standard access lists
 <900 - 999> IPX Extended access lists

 Example of a Deny set up
 RouterA(config)#access-list 10 deny host 207.207.7.2 # an access list with number 10 to deny IP number 207.207.7.2
 RouterA(config)#access-list 10 deny host 207.207.7.3 # an access list with number 10 to deny IP number 207.207.7.3
 RouterA(config)#access-list 10 deny host 207.207.7.4 # an access list with number 10 to deny IP number 207.207.7.4
 Assuming IP address 207.207.7.5 comes through and does not match the commands from 1 - 3, it will be discarded.
 Assuming, you wanted the IP address 207.207.7.5 to come through, you would have to OVERTURN THE IMPLICIT DENY with the below command:
 #access-list 10 permit any 
 Therefore, the IP will match the above permit command and will not be discarded.

Wild cards- Allow the specification of a range of IP addresses. It is similar to the subnet mask, but have a different meaning and should
not be confused with it.
0's on the wild card octet MEAN that the corresponding octet in the IP address MUST MATCH EXACTLY
1's on the wild card octet MEAN that the corresponding octet in the IP address CAN BE OF ANY VALUE

E.G:
RouterA(config)#access-list 10 deny 172.16.30.5 0.0.0.0  #deny traffic to the IP address with the mask 0.0.0.0

172.16.30.5   0.0.0.0  specifies  IP  address     172.16.30.5   exactly and none other
              172  .  16    .   30   .  5           IP                 #means the corresponding bits in the IP address CANNOT CHANGE. BECAUSE THE 0'S corresponding to it CANNOT CHANGE
          00000000.00000000.00000000.00000000     MASK

Zero's in the mask SAYS the corresponding bit in the IP address CANNOT CHANGE. 
So the exact address 172.16.30.5 is specified (SAYS I AM GOING TO DENY THIS ADDRESS AND ALL OTHER ACCORDING TO THE COMMAND ABOVE)

EXAMPLE 2:
RouterA(config)#access-list 10 deny 172.16.30.5 0.0.0.255  #deny source IP address with the mask 0.0.0.255

172.16.30.0   0.0.0.255  specifies  IP  addresses    172.16.30.0 through 172.16.30.255

                172  .  16     .   30    .00000101 #bits     
            000000000.000000000.000000000.11111111 # 0.0.0.255 in binary

One's in the Mask says the corresponding bits in the IP address can be 0 or 1.
So we have the range from 172.16.30.0 to 172.16.30.255.

              172    .  16     .   30    .00000000      172.16.30.0  #to first get bits of all 0's gives the IP address specified
            000000000.000000000.000000000.11111111
                          to
              172    .  16     .   30    .11111111      172.16.30.255 #makes it 1 and gives the IP address sepcified
            000000000.000000000.000000000.11111111

So this command - RouterA(config)#access-list 10 deny 172.16.30.5 0.0.0.255
Specifies the IP address 1772.16.30.5 through 172.16.30.255

EXAMPLE 3:
RouterA(config)#access-list 10 deny 172.16.30.5 0.0.3.255  #deny source IP address with the mask 0.0.0.255

172.16.30.0   0.0.3.255  specifies  IP  addresses    172.16.28.0 through 172.16.31.255
1's in the mask says the corresponding bits in the IP address can be 0 or 1.
So we have a range from 172.16.28.0 to 172.16.31.255.

                172  .  16     .   30    .00000101    172.316.30.0
              00000000.00000000.00000000.11111111
                     Range from
              172    .  16     . 0001111  00.11111111      172.16.28.255 #matching up the binary bits with the ip address
            000000000.000000000. 0000000  11.11111111      #all the 1's and 0's can change
                          to
              172    .  16     .ooo1111 11.11111111      172.16.31.255 #makes it 1 and gives the IP address sepcified
            000000000.000000000.0000000 11.11111111

#KEY WORDS
ANY AND HOST
any means 0.0.0.0     255.255.255.255   host implies the wildcard 0.0.0.0, thus

RouterA(config)#access-list 10 permit any         ; could be written as:  #same as saying permit all ip addresses
RouterA(config)#access-list 10 permit 0.0.0.0. 255.255.255.255 and

RouterA(config)#access-list 10 permit host 192.10.10.13         ; could be written as:
RouterA(config)#access-list 10 permit 192.10.10.3 0.0.0.0. and

Similar to subnet masks, 0's and 1's must be all adjacent. Thus, you cannot have the following wildcard
00000000.00000000.0001010111.11111111.
Thus the range of addresses exists in block sizes of 64, 32, 16, 8, 4.

RouterA(config)#access-list 10 deny host 172.16.16.0  0.0.7.255
should block ip addresses  172.16.16.0  172.16.23.255

RouterA(config)#access-list 10 deny host 172.16.32.0  0.0.31.255
should block ip addresses  172.16.32.0  172.16.63.255

Example 4:
RouterA(config)#access-list 10 deny 172.16.16.0  0.0.7.255
should block ip addresses  172.16.16.0 through  172.16.23.255

1010 1100.0001 0000.0001 0 000.0000 0000 172.16.16.0   #binary
0000 0000.0000 0000.0000 0 111.1111 1111   0.0 .7 . 255  #binary

1010 1100.0001 0000.0001 0 000.0000 0000 172.16.16.0   #binary
0000 0000.0000 0000.0000 0 111.1111 1111 172.16.23.255  #binary


Example 5:
RouterA(config)#access-list 10 deny 172.16.32.0  0.0.31.255
should block ip addresses  172.16.32.0 through  172.16.63.255

1010 1100.0001 0000.001  00000.0000 0000 172.16.32.0   #binary
0000 0000.0000 0000.000  11111.1111 1111   0.0 .31. 255  #binary

1010 1100.0001 0000.001  00000.0000 0000 172.16.32.0   #binary
0000 0000.0000 0000.000  11111.1111 1111   0.0 .31. 255

#ACCESS CONTROL LISTS COMMANDS:
#Standard ACL
access-list {1 - 99} {permit|deny} source address {source mask}

#Extended ACL
access-list {100 - 199} {permit | deny} protocol
  source address [source mask] [operator operand]
    destination address [source mask] [operator operand] [ established ]

ip access-group {number | name [ in | out ] }
ip access-list {standard | extended } name

show ip interface
show access-list
show ip access-list [ number ]

Example
3 routers
3 LAN: Sales, Finance and Marketing
Sales should not have access to Finance- source address from Sales should not be able to access LAN of Finance
Sales should be able to access Internet and Marketing
Marketing should have access to Finance
N.B: Place standard access list close to DESTINATION INTERFACE.

To block sales from finance, source will be Sales(127.16.40.0) and destination will be Finance. Destination will be 0
RouterB(config)#access-list 10 deny 172.16.40.0  0.0.0.255   #Router B is Finance, 10 is the number given, deny Sales(source address) with mask adding any line
RouterB(config)#access-list 10 permit any  #overcomes implicit deny to permit any ip
RouterB(config)#int e0   #place it at destination inteface (Finance)
RouterB(config-if)#ip access-group 10 out #place it at destination inteface (Finance)- this is outgoing, so a packet with source address from Sales will be blocked from Finance.

Example 2
Sales and Finance should not have access to Marketing
Sales Should have access to the Internet
Marketing should have access to Finance and Sales
Place the standard ACL close to the destination. Since yu want to deny access to Marketing, place the ACL on E0 Router C
Routerc(config)#access-list 10 deny 172.16.40.0  0.0.0.255   #Router C is Marketing, 10 is the number given, deny Sales(source address) with mask adding any line
Routerc(config)#access-list 10 deny 172.16.10.0  0.0.0.255   #Router C is Marketing, 10 is the number given, deny Finance(source address) with mask adding any line
RouterC(config)#access-list 10 permit any  #overcomes implicit deny to permit any ip
RouterC(config)#int e0   #place it at destination inteface (Finance)
RouterC(config-if)#ip access-group 10 out #packet coming from source addresses will be blocked at e0 router C. ACL on routerc is outgoing.

#Extended ACL
Dialog

#ports
echo Echo (7)  #using ping port 7
ftp  File Transfer Protocol (21)
pop2 Post Office Protocol v2 (109)
pop3 Post Office Protocol v3 (110)
smtp Simple Mail Transport Protocol (25)
telnet Telnet (23)

RouterA(config)#access-list 110 deny tcp any host 172.16.30.2  eq 21 log # numbered 110 indicates extended acl, "any" means deny any source address, host is the destination address. port 21 is ftp. deny any address from port 21
RouterA(config)#access-list 110 deny tcp any host 172.16.30.2  eq 23 log # Deny any ip from port 23 - telnet into the host address
RouterA(config)#access-list 110 permit ip any any #implicit deny, permit any any - first any is the source address, second any is the destination address

#Examples
Give an ACL that denies 207.207.7.0 from Telneting into 207.207.8.0 All other traffic is permitted
RouterA(config)#access-list 110 deny tcp 207.207.7.0 0.0.0.255 207.207.7.8.0 0.0.0.255  eq 23 #source address (207.207.7.0 0.0.0.255), destination address(207.207.8.0 0.0.0.255)
access-list 110 permit ip any any

Give an ACL that denies 207.207.7.17 from Telneting into 207.207.7.33. All other traffic is permitted
RouterA(config)#access-list 110 deny tcp any host 207.207.7.17 host 207.207.7.33  eq 23
access-list 110 permit ip any any

Give an ACL that denies network 207.207.7.16 through 207.207.7.13 from Telneting into 207.207.7.32 through 207.207.7.63 . All other traffic is permitted
access-list 110 deny tcp 207.207.7.16 0.0.0.15 207.207.7.32 0.0.0.31  eq 23 #source addresses(207.207.7.16 0.0.0.15)   destination addresses(207.207.7.32 0.0.0.31)
access-list 110 permit ip any any

Give an ACL that denies all Telnet traffic to network 207.207.7.0.
access-list 110 deny tcp any 207.207.7.0  0.0.0.225  eq 23
access-list 110 permit ip any any

Allow only email to network 207.207.7.0
access-list 110 permit tcp any 207.207.7.0  0.0.0.255 eq smtp #any source address
access-list 110 permit ip any any

Deny email to network 207.207.7.17 only. All other traffic is permitted
access-list 110 deny tcp any host 207.207.7.17 eq smtp #source from emailing into the host destination
access-list 110 permit ip any any #all other traffic is allowed

#Examples
UDP-based clients  and servers from subnet 192.10.10.0 and subnet 192.10.20.0 whose IP addresses are in the upper half of the valid IP
addresses on each subnet are not available to host Bugs
RouterB(config)#access-list 110 deny udp 192.10.10.0   0.0.0.127
                                                       host 10.1.1.1.111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111116333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++                                             *******************************************************************************************************************************************************************-------++++++693.RouterB(config)#access-list 111 deny udp 192.10.20.0   0.0.0.127
                                                       host 10.1.1.1





LAB 3: ACL Lab
Load the network in Lab 1:
Created a 2 router network- router0 and router1
PC0, PC1, PC2 and PC3
First: Verify that PC0 can ping PC2
Click on PC0. Go to deskstop. Click on command prompt. ping 207.207.7.50. If you a get a reply with a low TTL and a packet sent of 4. It is good
Ping PC2 - 207.207.7.60- Good
Ping PC3 - 207.208.7.51 - Good
Create a standard ACL that will block PC0 from accessing PC2
Where is it going to be placed? The standard ACL should be placed very close to the destination interface. Here it is at Router1 E0
Source is PC0. Router1 E0 is the destination interface
Standard ACL, give a number 10, deny the source of PC0 (207.207.7.18)- #access-list 10 deny host 207.207.7.18
second line overcomes the implicit deny any- #access-list 10 permit any (on any IP)
Place this on Router1 E0 #Router1(config)#interface GigabitEthernet0/0
Copy the script and place in on Router1 on the network
Click on Router 1. Click on CLI. run "ena". run "config t". Paste the script that was copied
Check if it is successful.
Go to command prompt on PC0
Ping PC2 - ping 207.207.7.50
If it says "Destination host unreachabele". It means it is successsful.
Ping PC3 - "Destination Host Unreachable"
It shows we are blocking the source packet ( from PC0) to go to Router1
Because the standard ACL has only the source address, you cannot distinguish between destinations
So PC0 is blocked from accessing PC2 and PC3 (Can't ping PC2 and PC3) because standard ACL can't distinguish between destinations.
Remove the blocking of access list with this command #no access-list 10
Check: Go to PC0 and ping PC2 and PC3 again. There were successful.

Create an Extended ACL that will block PC0(207.207.7.18) from accessing PC2(207.207.7.50), but ALLOWS PCO(207.207.7.18) access to PC3.
Give it a number 110. Going to deny (an ip host is used). The ip host is the source(207.207.7.18) and the destination is PC2 (host 207.207.7.50)
#access-list 110 deny ip host 207.207.7.18 host 207.207.7.50
Second line is to allow all of the traffic and this is going to be placed at the source(Extended ACL should be placed close to the source)
PC0 is the source, therefore Router0 will be the source(close to the source) #Router0(config)#access-list 110 permit ip any any
#Router(config)#interface GigabitEthernet0/0
Go to PC0 and see if you can ping PC2 and PC3. For PC2, "Destination Host is Unreachable" is good and for PC3, it should be reachable.
To verify that PC3 can ping PC0 and PC1, we need to delete the deny access to prevent it from interfering with the result.#CLI and run the command "no-access-list 10"

Go to PC3- Click on it. Command prompt- ping PC0 and PC1, They should be Reachable.
Create a standard ACL that willblock PC03 from accessing PC0. Place the ACL in Router0 E0
#access-list 12 deny host 207.207.7.51
#access-list 12 permit any
#interface GigbaitEthernet0/0
#ip access-group 12 out
#exit
Check- Go to PC3, can we ping PC1 "Destination Host Unreachable". PC0 is the same. Because the ACL was placed at Router0 E0 and this will BLOCK
all packets from the source regardless of the destination.
Remove the ACL and verify by pinging the sources again
